<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width initial-scale=1.0'>
    <title>Web API</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
        #msg {
            display: none;
            color: #D8000C;
            background-color: #FFBABA;
            padding: 10px;
            text-align: center;
            width: 80%;
            margin: auto;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="input-group mb-3 p-4">
            <span class="input-group-text" id="basic-addon1">+91</span>
            <input inputmode="tel" type="text" class="form-control" placeholder="Phone number" aria-label="number"
                aria-describedby="basic-addon1" id="tel-no">
        </div>
        <p id="msg"></p>
        <button type="button" class="btn btn-primary m-4" id="btn">Send</button>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
        </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        let input_number = document.getElementById('tel-no');
        let msg = document.getElementById('msg');
        var nums = /^[0-9]+$/;

        function show_error_message() {
            msg.innerHTML = '\u26A0 Invalid Phone Number';
            msg.style.display = 'block';
            input_number.style.borderColor = "red";
        }

        function make_valid() {
            if (input_number.value.length == 0) {
                input_number.style.borderColor = "green";
                msg.style.display = 'none';
            }
        }

        input_number.addEventListener('focusin', function () {
            make_valid();
        });

        input_number.addEventListener('focusout', function () {
            make_valid();
        });

        input_number.addEventListener('input', function () {
            let number = input_number.value;
            let len = number.length;

            if (number.match(nums)) {
                if (len > 10) {
                    show_error_message();
                } else {
                    msg.style.display = 'none';
                    input_number.style.borderColor = "green";
                }
            } else {
                show_error_message();
            }
            make_valid();
        });

        document.getElementById('btn').onclick = function () {
            let number = input_number.value;
            let len = number.length;
            if (number.match(nums) && len == 10) {
                let link = 'https://api.whatsapp.com/send?phone=91'.concat(number);
                location.href = link;
            } else {
                show_error_message();
            }
        }
    </script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SKBF4X6RS8"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-SKBF4X6RS8');
    </script>
</body>

</html>